{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{Typography,Box,TextField,Button,Card,CardContent,Alert,CircularProgress,InputAdornment}from'@mui/material';import{createCard}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateCard=()=>{const navigate=useNavigate();const[cardholderId,setCardholderId]=useState('');const[spendLimit,setSpendLimit]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError(null);try{// Convert spend limit to cents\nconst spendLimitCents=spendLimit?Math.floor(parseFloat(spendLimit)*100):undefined;const card=await createCard(cardholderId,spendLimitCents);navigate(`/cards/${card.id}`);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message||'Failed to create card');setLoading(false);}};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"Create New Virtual Card\"}),/*#__PURE__*/_jsx(Card,{sx:{maxWidth:600,mx:'auto',mt:4},children:/*#__PURE__*/_jsxs(CardContent,{children:[error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:3},children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Box,{sx:{mb:3},children:/*#__PURE__*/_jsx(TextField,{label:\"Cardholder ID\",value:cardholderId,onChange:e=>setCardholderId(e.target.value),fullWidth:true,required:true,placeholder:\"ich_xxxxxxxxxxxxxxxx\",disabled:loading,helperText:\"Enter your Stripe Cardholder ID (starts with 'ich_')\"})}),/*#__PURE__*/_jsx(Box,{sx:{mb:4},children:/*#__PURE__*/_jsx(TextField,{label:\"Spend Limit\",value:spendLimit,onChange:e=>setSpendLimit(e.target.value),fullWidth:true,type:\"number\",InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:\"$\"})},placeholder:\"1000\",disabled:loading,helperText:\"Optional: Set a lifetime spend limit for this card\"})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,disabled:loading||!cardholderId,children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'Create Virtual Card'})]})]})})]});};export default CreateCard;","map":{"version":3,"names":["React","useState","useNavigate","Typography","Box","TextField","Button","Card","CardContent","Alert","CircularProgress","InputAdornment","createCard","jsx","_jsx","jsxs","_jsxs","CreateCard","navigate","cardholderId","setCardholderId","spendLimit","setSpendLimit","loading","setLoading","error","setError","handleSubmit","e","preventDefault","spendLimitCents","Math","floor","parseFloat","undefined","card","id","err","_err$response","_err$response$data","response","data","message","children","variant","component","gutterBottom","sx","maxWidth","mx","mt","severity","mb","onSubmit","label","value","onChange","target","fullWidth","required","placeholder","disabled","helperText","type","InputProps","startAdornment","position","color","size"],"sources":["/Users/anishgoel/virtualCard/frontend/src/pages/CreateCard.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Typography,\n  Box,\n  TextField,\n  Button,\n  Card,\n  CardContent,\n  Alert,\n  CircularProgress,\n  InputAdornment\n} from '@mui/material';\nimport { createCard } from '../services/api';\n\nconst CreateCard: React.FC = () => {\n  const navigate = useNavigate();\n  const [cardholderId, setCardholderId] = useState<string>('');\n  const [spendLimit, setSpendLimit] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Convert spend limit to cents\n      const spendLimitCents = spendLimit ? Math.floor(parseFloat(spendLimit) * 100) : undefined;\n      \n      const card = await createCard(cardholderId, spendLimitCents);\n      navigate(`/cards/${card.id}`);\n    } catch (err: any) {\n      setError(err.response?.data?.error || err.message || 'Failed to create card');\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Box>\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n        Create New Virtual Card\n      </Typography>\n      \n      <Card sx={{ maxWidth: 600, mx: 'auto', mt: 4 }}>\n        <CardContent>\n          {error && (\n            <Alert severity=\"error\" sx={{ mb: 3 }}>\n              {error}\n            </Alert>\n          )}\n          \n          <form onSubmit={handleSubmit}>\n            <Box sx={{ mb: 3 }}>\n              <TextField\n                label=\"Cardholder ID\"\n                value={cardholderId}\n                onChange={(e) => setCardholderId(e.target.value)}\n                fullWidth\n                required\n                placeholder=\"ich_xxxxxxxxxxxxxxxx\"\n                disabled={loading}\n                helperText=\"Enter your Stripe Cardholder ID (starts with 'ich_')\"\n              />\n            </Box>\n            \n            <Box sx={{ mb: 4 }}>\n              <TextField\n                label=\"Spend Limit\"\n                value={spendLimit}\n                onChange={(e) => setSpendLimit(e.target.value)}\n                fullWidth\n                type=\"number\"\n                InputProps={{\n                  startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\n                }}\n                placeholder=\"1000\"\n                disabled={loading}\n                helperText=\"Optional: Set a lifetime spend limit for this card\"\n              />\n            </Box>\n            \n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              color=\"primary\"\n              fullWidth\n              disabled={loading || !cardholderId}\n            >\n              {loading ? <CircularProgress size={24} /> : 'Create Virtual Card'}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </Box>\n  );\n};\n\nexport default CreateCard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}